{"version":3,"file":"static/js/9975.badf383b.chunk.js","mappings":"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","sources":["hooks/Toast.js","hooks/api.js","hooks/index.js","hooks/io.js","pages/DevicesManagement/Devices/Create/ProtocolBox.js","webpack://ms-ui/./src/pages/DevicesManagement/Devices/Create/ProtocolBox.module.scss?0e13","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"sourcesContent":["import { toast } from \"react-toastify\";\nexport default function Toast(type) {\n  if (type) {\n    return (msg) => {\n      toast[type](msg, {\n        position: \"bottom-center\",\n        autoClose: 2000,\n        hideProgressBar: true,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n    };\n  } else {\n    return (msg) => {\n      toast(msg, {\n        position: \"bottom-center\",\n        autoClose: 2000,\n        hideProgressBar: true,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n    };\n  }\n}\n","import axios from \"axios\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport Toast from \"./Toast\";\nexport function useServiceInfo() {\n  return useQuery(\n    \"service-info\",\n    async () => {\n      const data = await axios.get(\"/microservices\").then(({ data }) => data);\n      return data;\n    },\n    {\n      staleTime: 60000,\n    }\n  );\n}\nexport function useProvision({ onSuccess = () => {} }) {\n  const queryClient = useQueryClient();\n  const errorToast = Toast(\"error\");\n  return useMutation(\n    (data) =>\n      axios.get(\"/devices/provision\", {\n        params: {\n          id: data,\n        },\n      }),\n    {\n      onSuccess: () => {\n        onSuccess();\n        queryClient.invalidateQueries(\"devices-info\");\n      },\n      onError: (error, variables, context) => {\n        errorToast(error.response?.data);\n      },\n    }\n  );\n}\nexport function useProtcolConfig(name) {\n  return useQuery(\n    `protocol?${name}`,\n    async () => {\n      if (name) {\n        const data = await axios\n          .get(\"/protocol\", {\n            params: {\n              id: name,\n            },\n          })\n          .then(({ data }) => data);\n        return data;\n      }\n      return 0;\n    },\n    {\n      staleTime: 100,\n    }\n  );\n}\nexport function useTask() {\n  return useQuery(\n    \"task\",\n    async () => {\n      const data = await axios.get(\"/tasks\").then(({ data }) => data);\n      return data;\n    },\n    {\n      staleTime: 60000,\n    }\n  );\n}\nexport function useMutateProtocol({ onSuccess = () => {} }) {\n  const queryClient = useQueryClient();\n  const errorToast = Toast(\"error\");\n  return useMutation((data) => axios.post(\"/protocol\", data), {\n    onSuccess: () => {\n      onSuccess();\n      queryClient.invalidateQueries(\"service-info\");\n    },\n    onError: (error, variables, context) => {\n      errorToast(error.response?.data);\n    },\n  });\n}\nexport function useDeleteDevice({ onSuccess = () => {} }) {\n  const queryClient = useQueryClient();\n  const errorToast = Toast(\"error\");\n\n  return useMutation((data) => axios.delete(\"/devices\", { params: data }), {\n    onSuccess: () => {\n      onSuccess();\n      queryClient.invalidateQueries(\"devices-info\");\n    },\n    onError: (error, variables, context) => {\n      errorToast(error.response?.data);\n    },\n  });\n}\nexport function useMutateDevice({ onSuccess = () => {} }) {\n  const queryClient = useQueryClient();\n  const errorToast = Toast(\"error\");\n  return useMutation((data) => axios.post(\"/devices\", data), {\n    onSuccess: () => {\n      onSuccess();\n      queryClient.invalidateQueries(\"devices-info\");\n    },\n    onError: (error, variables, context) => {\n      errorToast(error.response?.data);\n    },\n  });\n}\nexport function useMutateTask({ onSuccess = () => {} }) {\n  const queryClient = useQueryClient();\n  const errorToast = Toast(\"error\");\n  return useMutation((data) => axios.post(\"/tasks\", data), {\n    onSuccess: () => {\n      onSuccess();\n      queryClient.invalidateQueries(\"task\");\n    },\n    onError: (error, variables, context) => {\n      errorToast(error.response?.data);\n    },\n  });\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport axios from \"axios\";\nimport Toast from \"./Toast\";\nexport function useDevicesInfo() {\n  return useQuery(\n    \"devices-info\",\n    async () => {\n      const data = await axios.get(\"/devices/info\").then(({ data }) => data);\n      return data;\n    },\n    {\n      staleTime: 60000,\n    }\n  );\n}\nexport function useModelsInfo() {\n  return useQuery(\n    \"models-info\",\n    async () => {\n      const data = await axios.get(\"/models/info\").then(({ data }) => data);\n      return data;\n    },\n    {\n      staleTime: 60000,\n    }\n  );\n}\nexport function useMutationModel({ onSuccess }) {\n  const queryClient = useQueryClient();\n  const errorToast = Toast(\"error\");\n  return useMutation((data) => axios.post(\"/models\", data), {\n    onSuccess: () => {\n      onSuccess();\n      queryClient.invalidateQueries(\"models-info\");\n    },\n    onError: (error, variables, context) => {\n      errorToast(error.response?.data);\n    },\n  });\n}\nexport function useToast(prop) {\n  return Toast(prop);\n}\nexport * from \"./api\";\nexport * from \"./io\";\n","import { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nexport function useSocket(topic) {\n  const IO = useRef(io());\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    console.log(\"\");\n    IO.current.on(\"connect\", () => {\n      IO.current.emit(topic, true);\n      IO.current.on(topic, (data) => {\n        setData(data);\n      });\n    });\n    return () => {};\n  }, [IO, topic]);\n  return data;\n}\n","import Popup from \"reactjs-popup\";\nimport style from \"./ProtocolBox.module.scss\";\nimport { useMutateProtocol } from \"hooks\";\nexport default function ProtocolBox({ trigger, data, open = false, onClose }) {\n  const { mutate } = useMutateProtocol({\n    onSuccess: () => {\n      console.log(\"success\");\n      window.location.reload();\n    },\n  });\n  return (\n    <Popup\n      trigger={trigger}\n      modal\n      contentStyle={{ backgroundColor: \"white\" }}\n      open={open}\n      onClose={onClose}\n    >\n      {(close) => (\n        <div className={style.container}>\n          <form\n            onSubmit={(elemet) => {\n              elemet.preventDefault();\n              [{ type: \"STRING\", key: \"name\" }, ...data].map((e) => ({\n                [e.key]: elemet.target[e.key].value,\n              }));\n\n              const packet = [{ type: \"STRING\", key: \"name\" }, ...data]\n                .map((e) => ({\n                  [e.key]: elemet.target[e.key].value,\n                }))\n                .reduce((a, b) => ({ ...a, ...b }), {});\n              packet.MicroserviceID = data[0]?.MicroserviceID;\n              mutate(packet);\n              close();\n            }}\n          >\n            <div className={style.header}>Create new config</div>\n            {[{ type: \"STRING\", key: \"name\" }, ...data].map((e) => {\n              switch (e.type) {\n                case \"ENUM\":\n                  return (\n                    <div className={style.row} key={e.key}>\n                      <span>{e.key}</span>\n                      <select name={e.key} defaultValue={e.defaultValue}>\n                        {JSON.parse(e.values).map((e) => (\n                          <option key={e} value={e}>\n                            {e}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  );\n                default:\n                  return (\n                    <div className={style.row} key={e.key}>\n                      <span>{e.key}</span>\n                      <input\n                        type=\"text\"\n                        name={e.key}\n                        defaultValue={e.defaultValue}\n                      />\n                    </div>\n                  );\n              }\n            })}\n            <div className={style.footer}>\n              <input\n                type=\"submit\"\n                value=\"Create\"\n                className={style.buttonHolder}\n              />\n            </div>\n          </form>\n        </div>\n      )}\n    </Popup>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ProtocolBox_container__HuIq3\",\"header\":\"ProtocolBox_header__B7mIS\",\"row\":\"ProtocolBox_row__zK5XT\",\"buttonHolder\":\"ProtocolBox_buttonHolder__BRn71\",\"footer\":\"ProtocolBox_footer__gPzvW\"};","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"names":["Toast","type","msg","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","useServiceInfo","useQuery","axios","then","data","staleTime","useProvision","onSuccess","queryClient","useQueryClient","errorToast","useMutation","params","id","invalidateQueries","onError","error","variables","context","response","useProtcolConfig","name","useTask","useMutateProtocol","useDeleteDevice","useMutateDevice","useMutateTask","useDevicesInfo","useModelsInfo","useMutationModel","useToast","prop","useSocket","topic","IO","useRef","io","useState","setData","useEffect","console","log","current","on","emit","ProtocolBox","trigger","open","onClose","mutate","window","location","reload","modal","contentStyle","backgroundColor","close","className","style","onSubmit","elemet","preventDefault","key","map","e","target","value","packet","reduce","a","b","MicroserviceID","defaultValue","JSON","parse","values","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError"],"sourceRoot":""}